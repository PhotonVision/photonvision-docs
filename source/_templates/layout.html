{# Import the theme's layout. #}
{% extends '!layout.html' %}

{%- block extrahead %}
<script>
    if(localStorage.getItem("colorTheme") === "dark") {
        document.documentElement.setAttribute('data-theme', 'dark');
    } else {
        document.documentElement.setAttribute('data-theme', 'light');
    }

</script>

{# Call the parent block #}
{{ super() }}
{% endblock %}

{%- block extrafooter %}
{# Add custom things to the head HTML tag #}

<div class="dark-mode-toggle-container">
    <strong class="light-label">L</strong>

    <label class="dark-mode-toggle">
        <input type="checkbox" id="switch" name="theme"/><label class="toggle" for="switch">Toggle</label>
    </label>

    <strong class="dark-label">D</strong>
</div>

<script>
    var checkbox = document.querySelector('input[name=theme]');

    if(localStorage.getItem("colorTheme") === "dark") {
        // Auto check the checkbox if the stored theme was "dark".
        checkbox.checked = true;
    }
    

    checkbox.addEventListener('change', function() {
        if(this.checked) {
            document.documentElement.setAttribute('data-theme', 'dark');
            localStorage.setItem("colorTheme", "dark");
        } else {
            document.documentElement.setAttribute('data-theme', 'light');
            localStorage.setItem("colorTheme", "light");
        }
    })
</script>

{# Call the parent block #}
{{ super() }}
{%- endblock %}
